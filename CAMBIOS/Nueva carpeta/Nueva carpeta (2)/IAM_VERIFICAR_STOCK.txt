
/****** Object:  StoredProcedure [dbo].[IAM_VERIFICAR_STOCK]    Script Date: 05/01/2018 11:31:00 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[IAM_VERIFICAR_STOCK]
@COD_ART CHAR(15),@COD_ALMACEN BIGINT,@STOCK FLOAT OUTPUT
 AS


	BEGIN
		SELECT @STOCK= ISNULL((SELECT SUM(CANT_KARDEX) FROM Kardex WHERE TIPO_MOV = 'Ingreso' AND CODIGO=@COD_ART AND 
		COD_ALMACEN=@COD_ALMACEN ),0)
		 -ISNULL((SELECT SUM(CANT_KARDEX) FROM Kardex WHERE TIPO_MOV = 'Salida' AND CODIGO=@COD_ART AND COD_ALMACEN=@COD_ALMACEN ),0) 
	END


SET @STOCK=ISNULL(@STOCK,0)

RETURN
