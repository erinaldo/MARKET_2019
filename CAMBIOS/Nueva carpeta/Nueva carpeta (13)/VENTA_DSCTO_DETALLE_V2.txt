USE [MARKET_AEROPUERTO]
GO
/****** Object:  StoredProcedure [dbo].[VENTA_DSCTO_DETALLE_V2]    Script Date: 01/22/2019 13:26:39 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[VENTA_DSCTO_DETALLE_V2]
@IDTMP INT,
@CORR FLOAT,
@DESC FLOAT,
@CANT INT,
@TIPO CHAR(1),
@SW INT OUTPUT

 AS

 BEGIN TRAN	
	SET @SW=0
	IF @TIPO='U'
		BEGIN
			UPDATE DETALLETMP SET DSCTO_PORC=@DESC,DSCTO_MONTO=0 WHERE ID_TMP=@IDTMP
			--CANT_TMP=@CANT,
		END
	ELSE
		BEGIN
			UPDATE DETALLETMP SET DSCTO_PORC=@DESC,DSCTO_MONTO=0 WHERE CORR_TMP=@CORR
			--CANT_TMP=@CANT,
		END

	 IF (@@ERROR!=0)
	    BEGIN
		--RAISERROR 2000 'error actualizando datos'
		ROLLBACK TRAN
		SET @SW=1
	        RETURN(1)

	    END
	
    COMMIT TRAN
