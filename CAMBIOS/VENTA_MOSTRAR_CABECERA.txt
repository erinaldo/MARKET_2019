USE [SAN_DIEGO]
GO
/****** Object:  StoredProcedure [dbo].[VENTA_MOSTRAR_CABECERA]    Script Date: 09/19/2019 14:33:55 ******/
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[VENTA_MOSTRAR_CABECERA]
@COD_DOC CHAR(3),@NRODOCU NUMERIC
 AS
SELECT     VENTACAB.COD_DOC, VENTACAB.NRODOCU, VENTACAB.MON_VENTA, VENTACAB.CAMBIO_VENTA, VENTACAB.CDTIPOPAGO, VENTACAB.STAT_VENTA, VENTACAB.FECHA_VENTA, 
                      VENTACAB.FECPROCESO, VENTACAB.TOTAL_VENTA, VENTACAB.SUBTOT_VENTA, VENTACAB.IGV_VENTA, VENTACAB.VUELTO_VENTA, VENTACAB.PAGOS_VENTA, VENTACAB.PAGOD_VENTA, 
                      VENTACAB.COD_CLIENTE, VENTACAB.CIERREX, VENTACAB.CIERREZ, VENTACAB.COD_USER, VENTACAB.NROPTOVTA, VENTACAB.FECANULA, VENTACAB.TURNO, VENTACAB.FECHA_REG, 
                      CLIENTES.DESC_CLIENTE, CLIENTES.RUC_CLIENTE, CLIENTES.DIR_CLIENTE, VENTACAB.DSCTO_VENTA, ISNULL(CLIENTES.DNI_CLIENTE, '') AS ACLIDNI, 
                      CASE WHEN ISNULL(CLIENTES.RUC_CLIENTE, '') = '' THEN 'D' ELSE 'R' END AS TCLIENTE, ISNULL(CLIENTES.MAIL_CLIENTE, '') AS ACLIMAIL, 
                      ISNULL(VENTACAB.GRATUITA_VENTA,0) AS GRATUITA_VENTA
FROM         VENTACAB LEFT OUTER JOIN
                      CLIENTES ON VENTACAB.COD_CLIENTE = CLIENTES.COD_CLIENTE
WHERE     (VENTACAB.COD_DOC = @COD_DOC) AND (VENTACAB.NRODOCU = @NRODOCU)